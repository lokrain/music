# Music Theory & Analytics API — Discovery Summary

## 1. Product & Architectural Direction

* **Cloud/API-first**, v1 focused on private beta usage.
* **Hybrid design**: reusable Rust engine + API layer above it.
* **Input scope**: symbolic and MIDI; audio explicitly excluded in v1.
* **Primary value**: deep musical analysis plus high‑quality harmonic/melodic suggestions.

## 2. Core Musical Modeling

* **Full structure engine**: phrases, cadences, motifs, sections, long‑range form.
* **Dual-layer canonical model**:

  * Event layer (MIDI-like data, timing, tempo, grid).
  * Derived symbolic graph (keys, modes, chords, functions, structure).
* **Tuning**: 12‑TET exposed publicly; internal abstractions support future tuning systems.

## 3. Target Use Cases & Genres

* Private beta for advanced musicians/producers.
* Primary optimization: jazz, neo‑soul, funk, gospel, fusion.
* Secondary: pop, rock, R&B, EDM.

## 4. Non-Functional Priorities

1. Correctness and theoretical consistency.
2. Explainability and introspection.
3. Experimentation speed.
4. Latency performance ("good enough" for v1).

## 5. Execution & API Style

* **Streaming/interactive analysis** as a first‑class mode.
* **WebSocket primary**, **SSE fallback**.
* **REST + JSON** as the main external API.
* API surface: one main analyze endpoint plus a small set of focused ones.
* **Optional persistence**: stateless core, with run IDs for stored analyses.

## 6. Explainability

* Multi-level model: `none`, `brief`, `detailed`, `debug`.
* `debug` gated for internal/testing usage.

## 7. Creativity / Style Controls

* Preset profiles for high-level usage.
* Optional structured overrides (harmonic risk, tension, voice-leading strictness, etc.).
* Internals fully structured and orthogonal.

## 8. Rust Workspace Structure

* Single monorepo, single Cargo workspace, multiple crates:

  * `music-core`
  * `music-structure`
  * `music-analysis`
  * `music-api`
  * `music-cli`

## 9. Remaining TBD Areas (Non-blocking)

* Authentication model for private beta.
* Retention/TTL and storage quotas for persisted runs.
* Concrete deployment environment and SLOs.
* Initial test and evaluation dataset design.

## 10. Readiness

* Overall readiness to move into full specification and design: **~96%**.
